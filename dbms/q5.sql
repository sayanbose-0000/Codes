
CREATE TABLE PROJECT (
  PROJECT_NO   NUMBER(4) CONSTRAINT pk_project PRIMARY KEY,
  PROJECT_NAME VARCHAR2(10) CONSTRAINT uq_project_name UNIQUE
);

CREATE TABLE PERSON (
  PERSON_NO    VARCHAR2(5)  CONSTRAINT pk_person PRIMARY KEY,
  PERSON_NAME  VARCHAR2(10) CONSTRAINT nn_person_name NOT NULL,
  SALARY       NUMBER(7,2)  CONSTRAINT chk_salary CHECK (SALARY >= 5000 AND SALARY <= 30000),
  BIRTH_DATE   DATE,
  JOIN_DATE    DATE,
  P_NO         NUMBER(4)    CONSTRAINT fk_person_project REFERENCES PROJECT(PROJECT_NO),
  CITY         VARCHAR2(15) CONSTRAINT chk_city CHECK (CITY LIKE 'Ind\_%' ESCAPE '\')
);

INSERT INTO PROJECT VALUES (1001, 'Alpha');
INSERT INTO PROJECT VALUES (1002, 'Beta');
INSERT INTO PROJECT VALUES (1003, 'Gamma');
INSERT INTO PROJECT VALUES (1004, 'Delta');

INSERT INTO PERSON VALUES ('P001', 'Alice',   12000, TO_DATE('1990-01-15', 'YYYY-MM-DD'), TO_DATE('2020-06-01', 'YYYY-MM-DD'), 1001, 'Ind_Pune');
INSERT INTO PERSON VALUES ('P002', 'Bob',     18000, TO_DATE('1988-03-12', 'YYYY-MM-DD'), TO_DATE('2019-04-21', 'YYYY-MM-DD'), 1002, 'Ind_Delhi');
INSERT INTO PERSON VALUES ('P003', 'Charlie', 22000, TO_DATE('1992-11-23', 'YYYY-MM-DD'), TO_DATE('2021-01-10', 'YYYY-MM-DD'), 1003, 'Ind_Mumbai');
INSERT INTO PERSON VALUES ('P004', 'David',   25000, TO_DATE('1995-09-17', 'YYYY-MM-DD'), TO_DATE('2020-03-05', 'YYYY-MM-DD'), 1001, 'Ind_Bangalore');
INSERT INTO PERSON VALUES ('P005', 'Eve',     14500, TO_DATE('1991-07-29', 'YYYY-MM-DD'), TO_DATE('2018-07-01', 'YYYY-MM-DD'), 1004, 'Ind_Chennai');
INSERT INTO PERSON VALUES ('P006', 'Fay',     15500, TO_DATE('1990-05-10', 'YYYY-MM-DD'), TO_DATE('2019-11-11', 'YYYY-MM-DD'), 1002, 'Ind_Hyderabad');
INSERT INTO PERSON VALUES ('P007', 'Grace',   19500, TO_DATE('1993-08-22', 'YYYY-MM-DD'), TO_DATE('2022-02-20', 'YYYY-MM-DD'), 1003, 'Ind_Kolkata');
INSERT INTO PERSON VALUES ('P008', 'Heidi',   30000, TO_DATE('1987-02-18', 'YYYY-MM-DD'), TO_DATE('2017-09-30', 'YYYY-MM-DD'), 1004, 'Ind_Jaipur');
INSERT INTO PERSON VALUES ('P009', 'Ivan',    5000,  TO_DATE('1994-10-05', 'YYYY-MM-DD'), TO_DATE('2020-12-12', 'YYYY-MM-DD'), 1001, 'Ind_Ahmedabad');
INSERT INTO PERSON VALUES ('P010', 'Judy',    27500, TO_DATE('1996-12-01', 'YYYY-MM-DD'), TO_DATE('2021-08-15', 'YYYY-MM-DD'), 1002, 'Ind_Surat');


select PR.PROJECT_NAME, count(*) from PROJECT PR, PERSON PE where PR.PROJECT_NO = PE.P_NO group by PR.PROJECT_NAME;

select MS, PR.PROJECT_NAME where in(select MAX(PE.SALARY) as MS from PROJECT PR, PERSON PE where PR.PROJECT_NO = PE.P_NO group by PR.PROJECT_NAME);